<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <meta name="viewport" content="initial-scale=1, width=device-width">
    <meta charset="utf-8">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <title>Inicio</title>
</head>
<body>
    <main>
        <div th:insert="layout :: layout"></div>
        <div class="mt-1">
            <strong>
                <p class="text-info text-center">Top 5 pontos de melhorias mais apontados</p>
            </strong>

            <table class="table table-bordered mt-1">
                <thead class="thead-dark">
                    <tr>
                        <th scope="col">Tittle</th>
                        <th scope="col">Classification</th>
                        <th scope="col">Likes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="improvement: ${improvements}">
                        <td th:text="${improvement.title}" />
                        <td th:text="${improvement.classification}" />
                        <td th:text="${improvement.likes}" />
                    </tr>
                </tbody>
            </table>
        </div>
        <div id="piechart" style="width: 900px; height: 500px;"></div>

        <script th:inline="javascript">
             google.charts.load('current', {'packages':['corechart']});
             google.charts.setOnLoadCallback(drawChart);

             function drawChart() {

               var data = new google.visualization.DataTable();
                data.addColumn('string', 'classification');
                data.addColumn('number', 'Porcent');


                var dataList = /*[[${classificationsPorcents}]]*/ [];

                for (var i = 0; i < dataList.length; i++) {
                    data.addRow([dataList[i].classification, dataList[i].totalLikesInPorcent]);
                }

               var options = {
                 title: 'My Daily Activities'
               };

               var chart = new google.visualization.PieChart(document.getElementById('piechart'));

               chart.draw(data, options);
             }
        </script>
    </main>
</body>
<footer>

</footer>
</html>